var g=Object.defineProperty;var u=(c,e,t)=>e in c?g(c,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[e]=t;var h=(c,e,t)=>u(c,typeof e!="symbol"?e+"":e,t);class y{constructor(){h(this,"eventHandlerDictionary",[]);h(this,"parentContainerId","");h(this,"maxColumnWidth",500)}getContext(){return document.getElementById(this.parentContainerId)}getElements(e){var t='[data-ParentId="'+e+'"]',i=this.getContext().querySelectorAll(t);return i}getChildren(e){if(e==null||e=="")return new Array;var t=this.getContext().querySelectorAll("tr");let i=new Array;for(var n=0;n<t.length;n++)t[n].getAttribute("data-parentid")==e&&i.push(t[n]);return i}hasClass(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>-1}showChildren(e,t,i,n){var a=this.getContext().querySelector('[data-id="'+e+'"]');a!=null&&(a.className=a.className.replace(" collapsed",""));for(var l=this.getChildren(e),s=0;s<l.length;s++){var d=l[s].dataset.id,r='[data-id="'+d+'"] td',o=l[s].querySelector(r+" .vjoinendcollapsible, "+r+" .vjoincollapsible");o!==null&&this.showChildren(d,null,null,null),l[s].style.display="table-row"}t!=null&&(t.className="base "+n,this.registerEventSingle(t,"click",this.eventHandlerDictionary[n]))}hideChildren(e,t,i,n){var a=this.getContext().querySelector('[data-id="'+e+'"]');a!=null&&(a.className=a.className+" collapsed"),t!=null&&(this.hideUnderlyingElements(e),t.className="base "+n,this.registerEventSingle(t,"click",this.eventHandlerDictionary[n]))}hideUnderlyingElements(e){for(var t=this.getChildren(e),i=0;i<t.length;i++){var n=t[i].dataset.id;this.hideUnderlyingElements(n),t[i].style.display="none"}}createSpan(e){var t=document.createElement("SPAN");return t.className=e,t}addIdentation(e,t,i){t+=1;for(var n=0;n<e.length;n++){var a=t,l=e[n].dataset.id,s=e[n].getElementsByTagName("td")[0],d=this.getChildren(l),r=d.length>0,o=n===e.length-1;o?i[t-1]=this.createSpan("base spacer"):i[t-1]=this.createSpan("base vline");var v=null,p=s.parentElement;for(this.hasClass(p,"collapsed")&&(v="collapsed");a-1>=1;)a=a-1,a===t-1&&v==="collapsed"&&r&&!o?(s.insertBefore(this.createSpan("base vjoinexpandable"),s.childNodes[0]),this.hideUnderlyingElements(p.dataset.id)):a===t-1&&v==="collapsed"&&r&&o?(s.insertBefore(this.createSpan("base vjoinendexpandable"),s.childNodes[0]),this.hideUnderlyingElements(p.dataset.id)):a===t-1&&r&&o?s.insertBefore(this.createSpan("base vjoinendcollapsible"),s.childNodes[0]):a===t-1&&r&&!o?s.insertBefore(this.createSpan("base vjoincollapsible"),s.childNodes[0]):a===t-1&&!r&&!o?s.insertBefore(this.createSpan("base vjoin"),s.childNodes[0]):a===t-1&&!r&&o?s.insertBefore(this.createSpan("base vjoinend"),s.childNodes[0]):i[a]!==void 0&&s.insertBefore(i[a].cloneNode(),s.childNodes[0]);this.addIdentation(d,t,i)}}insertIndentations(){for(var e=this.getContext().querySelectorAll("tr:not([data-parentId])"),t=0;t<e.length;t++){var i=1,n=e[t].dataset.id,a=this.getChildren(n),l=t===e.length-1,s=[];l?s[i]=this.createSpan("base spacer"):s[i]=this.createSpan("base vline"),this.addIdentation(a,i,s)}}getParentElementId(e){var t=e.parentElement.parentElement,i=t.dataset.id;return i}initEventHandlerDictionary(){var e=this;this.eventHandlerDictionary.vjoinexpandable=function(){var t=e.getParentElementId(this);e.showChildren(t,this,"vjoinexpandable","vjoincollapsible")},this.eventHandlerDictionary.vjoincollapsible=function(){var t=e.getParentElementId(this);e.hideChildren(t,this,"vjoincollapsible","vjoinexpandable")},this.eventHandlerDictionary.vjoinendexpandable=function(){var t=e.getParentElementId(this);e.showChildren(t,this,"vjoinendexpandable","vjoinendcollapsible")},this.eventHandlerDictionary.vjoinendcollapsible=function(){var t=e.getParentElementId(this);e.hideChildren(t,this,"vjoinendcollapsible","vjoinendexpandable")},this.eventHandlerDictionary.pushpinClick=function(t){for(var i=this,n=this;(n=n.parentElement)&&!n.classList.contains("popout"););n.removeEventListener("mouseout",e.eventHandlerDictionary.popOutMouseOut),i.className.indexOf("pinned")>-1?i.className=i.className.replace(" pinned",""):i.className+=" pinned"},this.eventHandlerDictionary.descriptionMouseIn=function(t){this.className.indexOf("popouthover")===-1&&(this.className+=" popouthover"),e.applyShowAllStyles(this);var i=this.querySelector(".pushpin");i.style.display="initial"},this.eventHandlerDictionary.descriptionMouseOut=function(t){var i=this.querySelector(".pinned");if(i===null){var n=this.querySelector(".pushpin");n.style.display="none",e.applyHideLongTextStyles(this),this.className=this.className.replace(" popouthover","")}else e.applyShowAllStyles(this),this.style.display="inline-block"}}registerEventSingle(e,t,i){t==="click"?e.onclick=i:t==="dblclick"?e.ondblclick=i:e.addEventListener(t,i)}registerEvent(e,t,i){for(var n=this.getContext().getElementsByClassName(e),a=0;a<n.length;a++){var l=n[a];this.registerEventSingle(l,t,i)}}registerForEvents(){this.registerEvent("vjoinexpandable","click",this.eventHandlerDictionary.vjoinexpandable),this.registerEvent("vjoincollapsible","click",this.eventHandlerDictionary.vjoincollapsible),this.registerEvent("vjoinendcollapsible","click",this.eventHandlerDictionary.vjoinendcollapsible),this.registerEvent("vjoinendexpandable","click",this.eventHandlerDictionary.vjoinendexpandable),this.registerEvent("pushpin","click",this.eventHandlerDictionary.pushpinClick),this.registerEvent("popout","mouseover",this.eventHandlerDictionary.descriptionMouseIn),this.registerEvent("popout","mouseout",this.eventHandlerDictionary.descriptionMouseOut)}resizeToMaxColumnWidth(e){for(var t=document.getElementById(e),i=t.getElementsByTagName("td"),n=0;n<i.length;n++){var a=i[n];if(a.className==="description"){var l=a.getBoundingClientRect();if(l.width>this.maxColumnWidth){a.className+=" popout",this.applyHideLongTextStyles(a);var s=document.createElement("div"),d=document.createElement("span"),r=a.childNodes[0];d.className="glyphicon glyphicon-pushpin pushpin",s.className="spanContainer",s.appendChild(d),a.insertBefore(s,r)}}}}applyShowAllStyles(e){e.style.overflow="visible",e.style.whiteSpace="normal"}applyHideLongTextStyles(e){e.style.overflow="hidden",e.style.whiteSpace="nowrap"}init(e,t=!1){this.parentContainerId=e,this.initEventHandlerDictionary(),this.insertIndentations(),this.resizeToMaxColumnWidth(e),this.registerForEvents(),t&&this.expandPathToSelectedNode()}expandPathToSelectedNode(){let e=this.getContext().querySelector(".treenode.selected");e!=null&&(this.collapseAllNodes(),this.expandPathToNode(e.getAttribute("data-id")))}collapseAllNodes(){$(this.getContext().querySelectorAll(".vjoincollapsible, .vjoinendcollapsible")).trigger("click")}expandPathToNode(e){this.getPathToNode(e).forEach(i=>{$(this.getContext().querySelector('[data-id="'+i+'"]').querySelectorAll(".vjoinexpandable, .vjoinendexpandable")).trigger("click")})}getPathToNode(e){let t=[],i=this.getContext().querySelector('[data-id="'+e+'"]').getAttribute("data-parentid");for(;i!=null;)t.push(i),i=this.getContext().querySelector('[data-id="'+i+'"]').getAttribute("data-parentid");return t}}window.BaseTreeTable=y;
