var S=Object.defineProperty;var x=(v,e,t)=>e in v?S(v,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):v[e]=t;var u=(v,e,t)=>x(v,typeof e!="symbol"?e+"":e,t);var p;(v=>{function e(i,n,r){let d=new Date;d.setTime(d.getTime()+r*24*60*60*1e3);let h="expires="+d.toUTCString();document.cookie=i+"="+n+";"+h+";path=/"}v.set=e;function t(i){let n=i+"=",d=decodeURIComponent(document.cookie).split(";");for(var h=0;h<d.length;h++){for(var o=d[h];o.charAt(0)==" ";)o=o.substring(1);if(o.indexOf(n)==0)return o.substring(n.length,o.length)}return null}v.get=t})(p||(p={}));class f{}u(f,"ShowCommonResourceElements","ShowCommonResourceElements");class m{constructor(e){u(this,"TreeFlavourCookie","tree");u(this,"TreeSettingsCookie","tree-settings");u(this,"contextQuerySelector");u(this,"eventHandlerDictionary",[]);u(this,"isRootCollapsible",!1);u(this,"hasDetailsPinned",!1);u(this,"hasDetails",!1);u(this,"parentContainerId","");e&&(this.isRootCollapsible=!0)}init(e){l.initPolyfills(),this.parentContainerId=e,this.initEventHandlerDictionary(),this.hasDetails=this.elementExists(".treetable-right-panel"),this.getContext().querySelector(".treetable").setAttribute("tabindex","0"),this.contextQuerySelector=new C(this.getContext());let t=this.getTreeRenderingMode(),i=this.getTreeRenderingSettings();if(this.initSettingButtons(i),this.hasFlavourButtons()===!0){let n=this.getContext().querySelectorAll(`[data-mode='${t}']`)[0];this.switchTreeMode(n,!1)}else this.renderTree(t,i)}expandNode(e,t,i){if(t!==i){var n=this.getVisibleChildren(e.getAttribute("data-id"));n.forEach((r,d)=>{if(l.hasClass(r,"collapsed")){var o=r.querySelector(".vjoinexpandable");o==null&&(o=r.querySelector(".vjoinendexpandable")),o!=null&&o.click()}this.expandNode(r,t+1,i)})}}hideTreeLevels(e){if(e<0)return;let t=this.getContext().querySelector("tr");this.hideNodes(t,1,e)}hideNodes(e,t,i){var n=this.getVisibleChildren(e.getAttribute("data-id"));if(t>=i)for(var r=0;r<n.length;r++)this.hideUnderlyingElements(n[r].dataset.id);else for(var r=0;r<n.length;r++)this.hideNodes(n[r],t+1,i)}renderTree(e,t){this.cleanPreviousMode();var i=this.getContext().querySelector(".treetable-wrapper");switch(i.className=`treetable-wrapper ${e}`,e){case"snapshot":this.renderSnapshotMode(t);break;case"diff":this.renderDiffMode(t);break;case"hybrid":this.renderHybridMode(t);break}const n=parseInt(this.getContext().getAttribute("data-level"));this.indentTree(n),this.registerForEvents(),this.hideTreeLevels(n)}renderSnapshotMode(e){var t=[this.hideStripedElement];this.hasTreeRenderingSetting(e,f.ShowCommonResourceElements)||(t=t.concat(this.hideCommonElement)),this.visitTree(t)}renderDiffMode(e){var t=[this.hideNonConstrainedElement];this.visitTree(t)}renderHybridMode(e){var t=[];this.hasTreeRenderingSetting(e,f.ShowCommonResourceElements)||(t=t.concat(this.hideCommonElement)),this.visitTree(t)}cleanPreviousMode(){for(var e=this.contextQuerySelector.getAll(".treetable tr"),t=0;t<e.length;t++){e[t].style.display="table-row",l.hasClass(e[t],"mode-hidden")&&l.removeClass(e[t],"mode-hidden");var i=e[t].getElementsByTagName("td")[0];if(i!=null)for(var n=i.querySelectorAll("span.base"),r=0;r<n.length;r++)i.removeChild(n[r])}}visitTree(e){if(e.length!=0){var t=this.getContext().querySelector(".treetable tr[data-id]:not([data-ParentId])"),i=this.getChildren(t.dataset.id);this.visitElements(i,e)}}visitElements(e,t){for(var i=0;i<e.length;i++){for(var n=e[i],r=0;r<t.length;r++)t[r](n);var d=this.getChildren(n.dataset.id);d.length>0&&this.visitElements(d,t)}}hideStripedElement(e){l.hideElement(e,"striped",!0)}hideNonConstrainedElement(e){l.hideElement(e,"constraints",!1)}hideCommonElement(e){l.hideElement(e,"common",!0)}getTreeRenderingMode(){let e=null;if(this.hasFlavourButtons()===!0&&(e=p.get(this.TreeFlavourCookie)),e==null){var t=this.getContext().querySelector(".treetable-wrapper"),i=l.hasClass(t,"diff"),n=l.hasClass(t,"snapshot");return i?"diff":n?"snapshot":"hybrid"}return e}getTreeRenderingSettings(){if(this.hasFlavourButtons()===!0){let e=p.get(this.TreeSettingsCookie);if(e!=null&&e!="")return e.split(",")}return[]}hasTreeRenderingSetting(e,t){return e.filter(i=>i==t).length>0}getSettingsCookieValue(e){return e.length==0?"":e.filter(t=>t!="").join()}shouldHideElement(e,t){return t==="hybrid"?!1:l.hasClass(e,"mode-hidden")}addIndentation(e,t,i,n){t+=1;for(var r=0;r<e.length;r++){var d=t,h=e[r].dataset.id,o=e[r].getElementsByTagName("td")[0],g=this.getVisibleChildren(h),s=g.length>0,a=r===e.length-1;for(a?i[t-1]=l.createSpan("base spacer"):i[t-1]=l.createSpan("base vline");d-1>=1;)d=d-1,d===t-1?s?n>=0&&t-1>=n?a?o.insertBefore(l.createSpan("base vjoinendexpandable"),o.childNodes[0]):o.insertBefore(l.createSpan("base vjoinexpandable"),o.childNodes[0]):a?o.insertBefore(l.createSpan("base vjoinendcollapsible"),o.childNodes[0]):o.insertBefore(l.createSpan("base vjoincollapsible"),o.childNodes[0]):a?o.insertBefore(l.createSpan("base vjoinend"),o.childNodes[0]):o.insertBefore(l.createSpan("base vjoin"),o.childNodes[0]):i[d]!==void 0&&o.insertBefore(i[d].cloneNode(),o.childNodes[0]);this.addIndentation(g,t,i,n)}}toggleActiveButton(e){let t=this.getContext().querySelector(".treetable-buttons .tree-control .tree-button.active");l.removeClass(t,"active"),l.addClass(e,"active")}toggleActive(e,t){t?l.removeClass(e,"active"):l.addClass(e,"active")}toggleSettingButton(e){let t=l.hasClass(e,"active");return this.toggleActive(e,t),!t}setSettingButton(e,t){let i=l.hasClass(e,"active");i!=t&&this.toggleActive(e,i)}initSettingButtons(e){let t=this.getContext().querySelectorAll(".treetable-buttons .tree-settings .tree-button");for(var i=0;i<t.length;i++){var n=t[i],r=n.dataset.settings,d=this.hasTreeRenderingSetting(e,r);this.setSettingButton(n,d)}}switchTreeMode(e,t){if(this.hasFlavourButtons()===!0){var i=e.dataset.mode;let n=this.getTreeRenderingSettings();this.toggleActiveButton(e),this.updateTree(i,n),t&&p.set(this.TreeFlavourCookie,i,30)}}toggleTreeSettings(e,t){if(this.hasFlavourButtons()===!0){var i=e.dataset.settings;let n=this.getTreeRenderingMode(),r=this.getTreeRenderingSettings().filter(h=>h!==i);this.toggleSettingButton(e)&&(r=r.concat(i)),this.updateTree(n,r),t&&p.set(this.TreeSettingsCookie,this.getSettingsCookieValue(r),30)}}updateTree(e,t){let i=this.getContext().querySelector("tr.selected");this.renderTree(e,t),this.hasDetailsPinned===!0&&(i!=null&&i.checkVisibility()?this.pinNode(i):this.pinRootNode()),this.resizeRightPanel(),this.updateSettingButtons(e)}updateSettingButtons(e){$("#"+f.ShowCommonResourceElements).prop("disabled",e=="diff")}pinNode(e){this.hasDetailsPinned=!0,this.showDetails(e);var t=this.getContext().querySelector(".details-popup .pin-control");l.hasClass(t,"pinned")||(t.classList.remove("unpinned"),t.classList.add("pinned")),this.setTreetableWrapperHeight(),this.resizeRightPanel()}pinRootNode(){var e=this.getContext().querySelector(".treetable tr[data-id]:not([data-ParentId])");this.pinNode(e)}getContext(){return document.getElementById(this.parentContainerId)}markRow(e){var t=this.getContext().querySelector("tr.selected");t&&l.removeClass(t,"selected"),t!=e&&l.addClass(e,"selected")}initEventHandlerDictionary(){var e=this;e.eventHandlerDictionary.vjoinexpandable=function(){var t=e.getParentElementId(this);e.showChildren(t,this,"vjoincollapsible")},e.eventHandlerDictionary.vjoincollapsible=function(){var t=e.getParentElementId(this);e.hideChildren(t,this,"vjoinexpandable")},e.eventHandlerDictionary.vjoinendexpandable=function(){var t=e.getParentElementId(this);e.showChildren(t,this,"vjoinendcollapsible")},e.eventHandlerDictionary.vjoinendcollapsible=function(){var t=e.getParentElementId(this);e.hideChildren(t,this,"vjoinendexpandable")},e.eventHandlerDictionary.selectRow=t=>{if(l.hasClass(t.target,"vjoinexpandable")||l.hasClass(t.target,"vjoincollapsible")||l.hasClass(t.target,"vjoinendexpandable")||l.hasClass(t.target,"vjoinendcollapsible"))return;let i=t.currentTarget!=null?t.currentTarget:t.target;e.markRow(i),e.hasDetails&&(e.hasDetailsPinned&&l.hasClass(i,"detailsexpanded")===!1?e.changePopupContent(i):e.pinDetails())},e.eventHandlerDictionary.pin=()=>{e.pinDetails()},e.eventHandlerDictionary.showpopup=function(){e.hasDetailsPinned&&e.changePopupContent(this)},e.eventHandlerDictionary.popuphover=function(){e.hasDetailsPinned||e.showDetails(this)},e.eventHandlerDictionary.switchmode=function(t){e.switchTreeMode(this,t.isTrusted)},e.eventHandlerDictionary.togglesettings=function(t){e.toggleTreeSettings(this,t.isTrusted)},e.eventHandlerDictionary.hideDetails=function(){if(e.hasDetailsPinned===!1){var t=e.getContext().querySelector(".details-popup");if(t!=null){var i=t.dataset.id,n=e.getContext().querySelector('tr[data-id="'+i+'"]');e.hideExpandedDetails(n,t)}}},e.eventHandlerDictionary.keydown=function(t){if(t.target instanceof HTMLAnchorElement)return;switch(t.keyCode){case 40:t.preventDefault(),i();break;case 38:t.preventDefault(),n();break;case 32:case 13:t.preventDefault(),r();break}function i(){let s=d();if(s==null){e.hasDetails&&e.pinRootNode();var a=e.getContext().querySelector(".treetable tr[data-id]:not([data-ParentId])");e.markRow(a);return}let c=h(s);c!=null&&c.click()}function n(){let s=d();if(s!=null){let a=o(s);a!=null&&a.click()}}function r(){let s=d();if(s!=null){let a=s.querySelector(".vjoincollapsible");a==null&&(a=s.querySelector(".vjoinexpandable")),a==null&&(a=s.querySelector(".vjoinendexpandable")),a==null&&(a=s.querySelector(".vjoinendcollapsible"));let c=a;c!=null&&c.click()}}function d(){return e.getContext().querySelector("tr.selected")}function h(s){if(!s)return;let a=s.nextElementSibling;for(;a;){if(g(a))return a;a=a.nextElementSibling}}function o(s){if(!s)return;let a=s.previousElementSibling;for(;a;){if(g(a))return a;a=a.previousElementSibling}}function g(s){return s.offsetWidth>0||s.offsetHeight>0}}}showChildren(e,t,i){for(var n=this.getVisibleChildren(e),r=this.getTreeRenderingMode(),d=0;d<n.length;d++){var h=n[d];if(!this.shouldHideElement(h,r)){var o=h.dataset.id,g='[data-id="'+o+'"] td',s=h.querySelector(g+" .vjoinendcollapsible, "+g+" .vjoincollapsible");if(s!==null&&this.showChildren(o,null,null),h.style.display="table-row",l.hasClass(h,"detailsexpanded")){var a=this.getContext().querySelector(".details-popup");a.style.display="block"}}}t!=null&&(t.className="base "+i,l.registerEventSingle(t,"click",this.eventHandlerDictionary[i])),this.setRightPanelHeightSameAsLeftPanelHeight(),this.recalculateDetailsPopupPosition()}getVisibleChildren(e){for(var t=this.getChildren(e),i=[],n=0,r=0;r<t.length;r++)l.hasClass(t[r],"mode-hidden")||(i[n]=t[r],n++);return i}getChildren(e){var t='[data-ParentId="'+e+'"]';return this.contextQuerySelector.getAll(t)}getParentElementId(e){var t=e.parentElement.parentElement,i=t.dataset.id;return i}hideChildren(e,t,i){t!==void 0&&(this.hideUnderlyingElements(e),t.className="base "+i,l.registerEventSingle(t,"click",this.eventHandlerDictionary[i]),this.setRightPanelHeightSameAsLeftPanelHeight(),this.recalculateDetailsPopupPosition())}hideUnderlyingElements(e){for(var t=this.getVisibleChildren(e),i=0;i<t.length;i++){var n=t[i];if(l.hasClass(n,"detailsexpanded")){var r=this.getContext().querySelector(".details-popup");r.style.display="none"}var d=n.dataset.id;this.hideUnderlyingElements(d),n.style.display="none"}}indentTree(e){for(var t="tr:not([data-parentId]):not(.mode-hidden)",i=this.contextQuerySelector.getAll(t),n=0;n<i.length;n++){var r=1,d=i[n],h=d.dataset.id,o=this.getVisibleChildren(h),g=n===i.length-1,s=[];g?s[r]=l.createSpan("base spacer"):s[r]=l.createSpan("base vline"),this.addIndentation(o,r,s,e)}}registerForEvents(){this.registerEvent(".vjoinexpandable","click",this.eventHandlerDictionary.vjoinexpandable),this.registerEvent(".vjoincollapsible","click",this.eventHandlerDictionary.vjoincollapsible),this.registerEvent(".vjoinendcollapsible","click",this.eventHandlerDictionary.vjoinendcollapsible),this.registerEvent(".vjoinendexpandable","click",this.eventHandlerDictionary.vjoinendexpandable),this.registerEvent(".treetable-buttons .tree-control .tree-button","click",this.eventHandlerDictionary.switchmode),this.registerEvent(".treetable-buttons .tree-settings .tree-button","click",this.eventHandlerDictionary.togglesettings),this.registerEvent(".treetable","keydown",this.eventHandlerDictionary.keydown),this.registerEvent(".treetable tr","click",this.eventHandlerDictionary.selectRow),this.hasDetails&&(this.registerEvent(".details-popup .pin-control","click",this.eventHandlerDictionary.pin),this.registerEvent(".treetable tr","hover",this.eventHandlerDictionary.popuphover),this.registerEvent(".treetable-wrapper","mouseleave",this.eventHandlerDictionary.hideDetails))}changePopupContent(e){if(this.hasDetailsPinned){var t=e.getAttribute("class").indexOf("detailsexpanded")!==-1;this.hasDetailsPinned&&t||(this.showDetails(e),this.changePinIcon())}}registerEvent(e,t,i){for(var n=this.getContext().querySelectorAll(e),r=0;r<n.length;r++){var d=n[r];l.registerEventSingle(d,t,i)}}pinDetails(){var e=this.getContext().querySelector(".details-popup"),t=e.dataset.id,i=this.getContext().querySelector('tr[data-id="'+t+'"]');this.hasDetailsPinned=!this.hasDetailsPinned,this.showDetails(i),this.changePinIcon()}changePinIcon(){var e=this.getContext().querySelector(".details-popup .pin-control");l.hasClass(e,"pinned")?(e.classList.remove("pinned"),e.classList.add("unpinned")):(e.classList.remove("unpinned"),e.classList.add("pinned"))}getDetailsWrapperDiv(){var e="test",t=this.getContext().querySelector(".treetable-right-panel"),i=t.querySelector("#"+e);return i==null&&(i=document.createElement("div"),i.setAttribute("id",e),t.appendChild(i)),i}hideExpandedDetails(e,t){var i=this.getContext().querySelector(".detailsexpanded");i!=null&&(l.removeClass(i,"detailsexpanded"),t.setAttribute("class","hidden"),t.removeAttribute("data-id"),this.setRightPanelHeightSameAsLeftPanelHeight())}showDetails(e){var t=e.getAttribute("data-id"),i=this.getDetailsWrapperDiv(),n=i.getAttribute("data-id"),r=t!=n;if(r){this.hideExpandedDetails(e,i);var d=e.querySelector(".details");if(l.addClass(e,"detailsexpanded"),d!=null&&d.innerHTML!=""){i.innerHTML=d.innerHTML,i.setAttribute("data-id",t),i.setAttribute("class","details-popup"),i.style.display="block",this.setDetailsPopupPosition(i,e);var h=e.querySelector(".pin-control");h.classList.add("unpinned"),this.registerEvent(".details-popup .pin-control","click",this.eventHandlerDictionary.pin)}}}setDetailsPopupPosition(e,t){if(t!=null){for(var i=t.getBoundingClientRect(),n=this.getContext().querySelector(".treetable").getBoundingClientRect(),r=i.top-n.top,d=r+e.getBoundingClientRect().height,h=this.getLastVisibleRowElement(),o=h.getBoundingClientRect(),g=o.top-n.top+o.height;;){var s=d>g;if(s){r-=5,d-=5;continue}var a=0,c=i.top-n.top>r;c&&(a=g-(r+e.getBoundingClientRect().height)),r=r<0?0:r+a;break}e.style.marginTop=r+"px",this.resizeRightPanel()}}resizeRightPanel(){var e=this.calculateNewRightPanelHeight();if(e!=null){var t=this.getContext().querySelector(".treetable-right-panel");t.style.height=e+"px",this.setTreetableWrapperHeight()}}calculateNewRightPanelHeight(){var e=void 0,t=this.getContext().querySelector(".details-popup"),i=this.getContext().querySelector(".treetable").getBoundingClientRect();if(t!=null){var n=t.getBoundingClientRect();n.height>i.height?e=n.height:n.height<i.height&&(e=i.height)}else e=i.height;return e}setRightPanelHeightSameAsLeftPanelHeight(){if(this.elementExists(".treetable-right-panel")){var t=this.getContext().querySelector(".treetable-left-panel"),i=this.getContext().querySelector(".treetable-right-panel");i.style.height=t.clientHeight+"px",this.setTreetableWrapperHeight()}}recalculateDetailsPopupPosition(){if(this.elementExists(".treetable-right-panel")){var t=this.getDetailsWrapperDiv(),i=this.getContext().querySelector(".treetable tr.detailsexpanded");this.setDetailsPopupPosition(t,i)}}setTreetableWrapperHeight(){var e=this.getContext().querySelector(".treetable-left-panel"),t=this.getContext().querySelector(".treetable-right-panel"),i=this.getContext().querySelector(".treetable-wrapper"),n=Math.max(e.clientHeight,t.clientHeight);n>0&&(i.style.height=n+"px")}getLastVisibleRowElement(){var e,t=this.contextQuerySelector.getAll("table tr");if(t)for(var i=0;i<t.length;i++)t[i].style.display!="none"&&(e=t[i]);return e}hasFlavourButtons(){return this.getContext().querySelector(".treetable-buttons")!=null}elementExists(e){return this.getContext().querySelector(e)!=null}}window.Stu3TreeTable=m;class N{constructor(){u(this,"contextQuerySelector");u(this,"eventHandlerDictionary",[]);u(this,"parentContainerId","")}init(e){l.initPolyfills(),this.parentContainerId=e,this.initEventHandlerDictionary(),this.getContext().querySelector(".treetable").setAttribute("tabindex","0"),this.contextQuerySelector=new C(this.getContext());const t=parseInt(this.getContext().getAttribute("data-level"));this.indentTree(t),this.registerForEvents(),this.hideTreeLevels(t)}hideTreeLevels(e){if(e<0)return;let t=this.getContext().querySelector("tr");this.hideNodes(t,1,e)}hideNodes(e,t,i){var n=this.getChildNodes(e.getAttribute("data-id"));if(t>=i)for(var r=0;r<n.length;r++)this.hideUnderlyingElements(n[r].dataset.id);else for(var r=0;r<n.length;r++)this.hideNodes(n[r],t+1,i)}expandNode(e,t,i){if(t!==i){var n=this.getChildNodes(e.getAttribute("data-id"));n.forEach((r,d)=>{if(l.hasClass(r,"collapsed")){var o=r.querySelector(".vjoinexpandable");o==null&&(o=r.querySelector(".vjoinendexpandable")),o!=null&&o.click()}this.expandNode(r,t+1,i)})}}getChildNodes(e){var t='[data-ParentId="'+e+'"]';return this.contextQuerySelector.getAll(t)}getContext(){return document.getElementById(this.parentContainerId)}markRow(e){var t=this.getContext().querySelector("tr.selected");t&&l.removeClass(t,"selected"),t!=e&&l.addClass(e,"selected")}initEventHandlerDictionary(){var e=this;e.eventHandlerDictionary.vjoinexpandable=function(){var t=e.getParentElementId(this);e.showChildren(t,this,"vjoincollapsible")},e.eventHandlerDictionary.vjoincollapsible=function(){var t=e.getParentElementId(this);e.hideChildren(t,this,"vjoinexpandable")},e.eventHandlerDictionary.vjoinendexpandable=function(){var t=e.getParentElementId(this);e.showChildren(t,this,"vjoinendcollapsible")},e.eventHandlerDictionary.vjoinendcollapsible=function(){var t=e.getParentElementId(this);e.hideChildren(t,this,"vjoinendexpandable")},e.eventHandlerDictionary.selectRow=t=>{if(l.hasClass(t.target,"vjoinexpandable")||l.hasClass(t.target,"vjoincollapsible")||l.hasClass(t.target,"vjoinendexpandable")||l.hasClass(t.target,"vjoinendcollapsible"))return;let i=t.currentTarget!=null?t.currentTarget:t.target;e.markRow(i)},e.eventHandlerDictionary.keydown=function(t){if(t.target instanceof HTMLAnchorElement)return;switch(t.keyCode){case 40:t.preventDefault(),i();break;case 38:t.preventDefault(),n();break;case 32:case 13:t.preventDefault(),r();break}function i(){let s=d();if(s==null){var a=e.getContext().querySelector(".treetable tr[data-id]:not([data-ParentId])");e.markRow(a);return}let c=h(s);c!=null&&c.click()}function n(){let s=d();if(s!=null){let a=o(s);a!=null&&a.click()}}function r(){let s=d();if(s!=null){let a=s.querySelector(".vjoincollapsible");a==null&&(a=s.querySelector(".vjoinexpandable")),a==null&&(a=s.querySelector(".vjoinendexpandable")),a==null&&(a=s.querySelector(".vjoinendcollapsible"));let c=a;c!=null&&c.click()}}function d(){return e.getContext().querySelector("tr.selected")}function h(s){if(!s)return;let a=s.nextElementSibling;for(;a;){if(g(a))return a;a=a.nextElementSibling}}function o(s){if(!s)return;let a=s.previousElementSibling;for(;a;){if(g(a))return a;a=a.previousElementSibling}}function g(s){return s.offsetWidth>0||s.offsetHeight>0}}}showChildren(e,t,i){for(var n=this.getChildNodes(e),r=0;r<n.length;r++){var d=n[r],h=d.dataset.id,o='[data-id="'+h+'"] td',g=d.querySelector(o+" .vjoinendcollapsible, "+o+" .vjoincollapsible");g!==null&&this.showChildren(h,null,null),d.style.display="table-row"}t!=null&&(t.className="base "+i,l.registerEventSingle(t,"click",this.eventHandlerDictionary[i]))}getParentElementId(e){var t=e.parentElement.parentElement,i=t.dataset.id;return i}hideChildren(e,t,i){t!==void 0&&(this.hideUnderlyingElements(e),t.className="base "+i,l.registerEventSingle(t,"click",this.eventHandlerDictionary[i]))}hideUnderlyingElements(e){for(var t=this.getChildNodes(e),i=0;i<t.length;i++){var n=t[i],r=n.dataset.id;this.hideUnderlyingElements(r),n.style.display="none"}}indentTree(e){for(var t="tr:not([data-parentId]):not(.mode-hidden)",i=this.contextQuerySelector.getAll(t),n=0;n<i.length;n++){var r=1,d=i[n],h=d.dataset.id,o=this.getChildNodes(h),g=n===i.length-1,s=[];g?s[r]=l.createSpan("base spacer"):s[r]=l.createSpan("base vline"),this.addIndentation(o,r,s,e)}}addIndentation(e,t,i,n){t+=1;for(var r=0;r<e.length;r++){var d=t,h=e[r].dataset.id,o=e[r].getElementsByTagName("td")[0],g=this.getChildNodes(h),s=g.length>0,a=r===e.length-1;for(a?i[t-1]=l.createSpan("base spacer"):i[t-1]=l.createSpan("base vline");d-1>=1;)d=d-1,d===t-1?s?n>=0&&t-1>=n?a?o.insertBefore(l.createSpan("base vjoinendexpandable"),o.childNodes[0]):o.insertBefore(l.createSpan("base vjoinexpandable"),o.childNodes[0]):a?o.insertBefore(l.createSpan("base vjoinendcollapsible"),o.childNodes[0]):o.insertBefore(l.createSpan("base vjoincollapsible"),o.childNodes[0]):a?o.insertBefore(l.createSpan("base vjoinend"),o.childNodes[0]):o.insertBefore(l.createSpan("base vjoin"),o.childNodes[0]):i[d]!==void 0&&o.insertBefore(i[d].cloneNode(),o.childNodes[0]);this.addIndentation(g,t,i,n)}}registerForEvents(){this.registerEvent(".vjoinexpandable","click",this.eventHandlerDictionary.vjoinexpandable),this.registerEvent(".vjoincollapsible","click",this.eventHandlerDictionary.vjoincollapsible),this.registerEvent(".vjoinendcollapsible","click",this.eventHandlerDictionary.vjoinendcollapsible),this.registerEvent(".vjoinendexpandable","click",this.eventHandlerDictionary.vjoinendexpandable),this.registerEvent(".treetable","keydown",this.eventHandlerDictionary.keydown),this.registerEvent(".treetable tr","click",this.eventHandlerDictionary.selectRow)}registerEvent(e,t,i){for(var n=this.getContext().querySelectorAll(e),r=0;r<n.length;r++){var d=n[r];l.registerEventSingle(d,t,i)}}}window.InstanceTree=N;class C{constructor(e){u(this,"allCache",[]);u(this,"cache",[]);u(this,"context");this.context=e}getAll(e){var t=this.allCache[e];return t||(t=this.context.querySelectorAll(e),this.allCache[e]=t,t)}get(e){var t=this.cache[e];return t||(t=this.context.querySelector(e),this.cache[e]=t,t)}}var l;(v=>{function e(s,a,c){switch(a){case"click":{s.onclick=c;break}case"hover":{s.onmouseover=c;break}default:{s.addEventListener(a,c);break}}}v.registerEventSingle=e;function t(s){var a=s.join(" ");return a}v.convertClassArrayNamesToString=t;function i(s){var a=s.getAttribute("class");a==null&&(a="");var c=a.split(" ");return c}v.getCurrentClassesAsArray=i;function n(s,a){var c=v.getCurrentClassesAsArray(s),b=c.indexOf(a);c.splice(b,1);var y=v.convertClassArrayNamesToString(c);s.setAttribute("class",y)}v.removeClass=n;function r(s,a){var c=v.getCurrentClassesAsArray(s);c.push(a);var b=v.convertClassArrayNamesToString(c);s.setAttribute("class",b)}v.addClass=r;function d(s,a){return(" "+s.className+" ").indexOf(" "+a+" ")>-1}v.hasClass=d;function h(s,a,c){v.hasClass(s,a)==c&&s.style.display!="none"&&(s.style.display="none",v.addClass(s,"mode-hidden"))}v.hideElement=h;function o(s){var a=document.createElement("SPAN");return a.className=s,a}v.createSpan=o;function g(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector||function(s){for(var a=(this.document||this.ownerDocument).querySelectorAll(s),c=a.length;--c>=0&&a.item(c)!==this;);return c>-1})}v.initPolyfills=g})(l||(l={}));
